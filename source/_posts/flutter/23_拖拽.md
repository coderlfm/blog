---
title: flutter 拖拽
date: 2022-03-18 10:38:10
toc: true
tags:
  - Flutter
  - Dart

categories:
  - Flutter
  - Dart

cover: /cover-imgs/flutter.png
---

flutter 拖拽

<!-- more -->
# 拖拽

ReorderableListView, 所有的子 `widget`都需要`key`,长按可进行拖拽

```Dart
body: const TestReorderable()

class TestReorderable extends StatefulWidget {
  const TestReorderable({Key? key}) : super(key: key);

  @override
  State<TestReorderable> createState() => _TestReorderableState();
}

class _TestReorderableState extends State<TestReorderable> {
  final boxes = [
    Box(color: Colors.blue[300]!, key: UniqueKey()),
    Box(color: Colors.blue[600]!, key: UniqueKey()),
    Box(color: Colors.blue[900]!, key: UniqueKey()),
  ];

  @override
  Widget build(BuildContext context) {
    return ReorderableListView(
      children: boxes,
      // 拖拽后触发的回调
      onReorder: (oldIndex, newIndex) {
        final widget = boxes.removeAt(oldIndex);
        if (newIndex > oldIndex) newIndex--; // 往后拖需要手动减
        boxes.insert(newIndex, widget);
        setState(() {});
      },
    );
  }
}

class Box extends StatelessWidget {
  final Color color;
  const Box({Key? key, required this.color}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return Center(child: Container(color: color, width: 50, height: 50, margin: const EdgeInsets.all(8)));
  }
}

```




