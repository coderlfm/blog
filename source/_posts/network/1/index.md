---
title: 计算机网络 计算机网络的概述
date: 2021-03-21 14:10:54
toc: true
tags:
  - http

categories:
  - http

cover: /cover-imgs/web-1.jpg
---

计算机网络的基本概念

<!-- more -->

<!-- ## 计算机网络的概述 -->

## 熟知的几种网络

- 电信网络
  早期是向用户提供电话，电报以及传真服务的
- 有线电视
  有线电视很明显是向用户传输电视节目

- 计算机网络
  计算机网络主要侧重于用户在计算机中之间传送数据

<article class="message is-info">
  <div class="message-header">
    <p>Internet</p>
  </div>
  <div class="message-body">
   Internet 中文翻译并不统一，现有的 Internet 有两种：
   <br/><br/>

   <li><b>因特网,</b> 全国科学技术名词审定委员会推荐的译名，这个译名较为准确，但是却一直没有推广开来，在 《计算机网络》 第七版 之前都是采用的这个译名 </li>
   <br/>

   <li><b>互联网, </b> 是当前最流行，使用量最广的标准译名，国内各种报刊杂志，电视节目，包括政府文件都使用的是该译名，
   <p>这个译名也更加能体现出 <b>Internet 是有数量极大地计算机网络互相连接起来的</b></p> 
   </li>
  </div>
</article>
<br/>

## 互连网 与 互联网

理解 `互连网` 与 `互联网`

- `互连网 (internet)`: 是一个通用名词，泛指任意使用不同协议将局部范围内的计算机连接掐里的网络称之为互连网
- `互联网 (Internet)`: 是一个专用名词，是值全球最大的，开放的，由众多网络相互连接而成的特定的计算机网络，采用 TCP/IP 协议 作为通信的规则
  <br/>
  <br/>

## 互连网标准化工作

标准化工作对一项技术的发展有着至关重要的影响，
制定的过早可能会由于还未发展到成熟阶段，陈旧的标准可能会限制产品的技术水平，最终不得不重新制定标准
制定的太晚的话，技术的发展可能会五站可循，各家产品制造出来后互不兼容

互联网的标准很大的特点是面向公众，互联网的 所有 RFC 都可以从互联网上下载下来，我们每个人都可以针对某个文档发表自己的意见

<!-- 标准不能制定的过早或者过晚，例如华为5g领先，但不是说全部按照华为的标准 -->

### 正式标准的阶段

- 草案 6 个月
- 建议标准
- 互联网标准 可以获得一个 编号 STD ，一个标准可以有多个 RFC
  <br/>
  <br/>

## 互联网边缘部分的连接方式

### 1.客户端-服务器方式 C/S 服务

这种方式是互联网是最多的
客户端 - 服务端
简单的描述就是 客户端发送请求 -> 服务端做出响应

### 2.对等方式 p2p 方式

简单的讲就是指两台主机在通信时没有明显的区分哪一台是服务端，哪一天是客户端，只要两台主机都运行了对等链接软件(P2P 软件)，它们就可以进行平等的，对等的连接通信，两台主机都能够互相下载对方的共享文件

从本质上来看，对等连接仍然可以看到 客户端-服务端的方式，只是对等链接中，每一台主机都可以是客户端，又可以是服务器

比较典型的例子就是文件下载，我为人人，人人为我的方式

## 互联网的核心部分

- 电路交换
  电话机就是典型的 电路交换

  两台电话建立连接需要经过 <b>建立连接(占用通信资源)</b> -> <b>通话(一直占用通信资源)</b> -> <b>释放连接(归还通信资源)</b>
  不同电话通信一对一的线 -> 交换机（通先前需要建立连接） 会存在占线

  当两端的电话一接通，就会建立一条专用的物理通路，这条连接保证了双方通话所需的通信资源，而这些资源在双方通信时不会被其他用户占用，通话完挂机后，交换机才会释放这条专用的物理通路

  老式交换机的是需要人工转接，我们有时候在电视中看到的90年代背景的电视剧中就会出现人工转接的情况，而且长途通话需要通过多个交换机来转接
  如果发送大量的连续的数据，使用电路交换比较快，但是电路交换不适合计算机通信

<br/>
- 分组交换 计算机通讯使用的是 分组交换

  在分组交换中，数据(通常一整块数据我们会称为 <b>`报文`</b>)会被分割成一个个等长的分组(数据段, 也被称为包) ，然后给这些分组加上一些必要的控制信息 `(header)`，这样就构成了一个 <b>`分组(packet)`</b>

  这个 `header` 是极极其重要的，正是因为加上了 `header，才能保证每个分组能够在互联网中独立的选择传输的路径，正确的被传输到分组传输的终点`

  分组会发送到就近的路由中 该路由会暂时先存储(这一步路由器是存在内存中而不是硬盘中，所有交换速率是较快的)，`然后会先检查其首部(header)`, 按照首部中的目标地址，接着查找转发表，找个合适的接口转发，交个下一个路由器，这样一步一步(这个过程中有时候回经过十几个不同的路由器)，采用存储转发的方式，最终到达目标主机中，
  
  其中当某个路由器 接受到的信息量过大的时候，它会同时匹配其它的路由帮助转发

  采用 分组交换 不需要 建立连接 - 释放连接 的过程，而且在传送数据时，是不需要占用这个端到另一个端的整个通信资源的，只有在分组在发送到这个路由器的时候，这个链路才是被占用的，在不被占用的时候，这个路由器也是可以为其它分组来提供存储转发的服务的，且在网络的中心部分 路由之间的连接是采用 高速链路连接的，连接的速度是极快的，只有边缘主机和路由核心部分的这块采用的低速链路连接的

  这一步为了保障数据的可靠传输型，当网络中的某些结点或者链路出现故障时，互联网还做了专门的措施，这一块可以后面再讨论

  其中最主要明确：
  路由器：最主要是做转发分组的
  
  采用存储转发 技术

  分段发 [地址，源数据]

  优点：
    + 高效：在传输过程中动态分配传输带宽，对通信链路是逐段占用的，而不是整个端占用
    + 灵活：为每个分组独立的选择最合适的转发路由
    + 迅速：以分组为单位，不需要先建立连接，就可以向其它主机发送分组
    + 可靠：保证可靠的网络协议，分布式

优点
由于一个分组的长度往往远小于整个报文的长度，因此分组交换比报文交换的时延小，同时也具有更好的灵活性

缺点
需要排队

- 报文交换
  用的较少了

### 总结

报文交换和分组交换不需要预先分配传输带宽，在传送突发数据时可以提高整个网络的信道利用率

- 广域网 WAN 花钱买带宽，运营商维护
- 城域网 MAN
- 局域网 LAN 个人维护
- 个人区域网 PAN

- 速率
- 带宽
  比如 100mbit 表示发送数据 100， 接收数据也是 100
  最高速率 网卡或交换机每秒能传输最大的数据 比特
- 吞吐量
  1 字节 = 8 比特

  7MB/秒

- 时延
  发送时延 4
  从数据最后 1 比特从网卡发送出去

  传播时延
  从数据最后 1 比特从网卡发送出去
  到最后 1 比特进入到路由器缓存
  处理时延
  排队时延

- 往返时间 RTT
  使用卫星通信，往返时间 rtt 相对较长
  可以使用 ping 命令来查看

- 利用率
  - 信道利用率
    信道利用率并非越高越好，该信道的时延也就迅速增加
  - 网路利用率

计算机网络非性能特征

- 费用
- 质量
- 标准化
- 可靠性
- 可扩展性和可升级型
- 易于管理和维护

## 计算机网络体系结构的形成

计算机网络是个非常复杂的系统
‘分层‘ 将庞大而复杂的问题转换成若干个较小的局部问题

1974 年 IBM 系统网络体系结构 SNA
其它公司相应提出

国际标准化组织 ISO 提出了 开发系统互连基本参考模型 osi/rm
例如两个省的铁路 轨道宽度

获得了理论研究成果，在市场化方面失败了，没有利益驱动
实现过分复杂，运行效率低

- osi 的专家们在完成 osi 标准时没有商业驱动力
- osi 协议实现过分复杂，且执行效率很低
- osi 标准的指定周期过长，因而使得 osi 标准生成的设备无法及时进入市场
- osi 的层次划分不太合理，有些功能在多个层次充重复出现

## 国际上的两种标准

当前 OSI
非国际标准 TCP/IP 获得了最广泛的引用

### 协议与划分层次

《对等实体》
数据交换必须遵守事先约定好的规则
这些规则 规定了所交换的数据格式及其有关的同步问题（同步含有时序问题）
网络协议三要素
语法：什么地方需要填什么内容
语义：类似于传参
同步：事件实现顺序的说明

wireshark 抓包工具

应用层协议
http 协议
smtp 协议
dns 协议
FTP 协议

解决接收

### 传输层

为应用层 提供服务，提供可靠的传输，保证数据能够完整传输 tcp/ip 协议中 tcp 协议主要为我们提供了可靠的传输

传输层传输的 段

### 网络层

网络层是为传输层提供服务的
段 + 网络地址 = 数据包
网络中的路由器根据 ip 地址选择出口

### 数据链路层

加上 其它地址 目标 ip 目标 mac
传输协议是帧
给到路由器，去掉 数据链路层的数据，重新封装，然后再一层一层传输

分层好处
各层之间是独立的
结构上可分隔开
易于实现和维护

缺点
效率低

支持 ipv6 网络层和数据链路层支持就 ok

层数太多 会在描述
陈述太少 会使每一层协议太复杂

#### 各个层中完成的主要功能

差错控制： 使相应层次对等方的通行更加可靠 （数据链路层检查，网络层检查，传输层检查（TCP, 重传））
流量控制：发送端的发送速率必须使接收端来得及接收，不要太快 （传输层）
分段和重装：发送端将要发送的数据块划分为更小的单位，在接收端将其还原（传输层）类似于装箱拆箱的操作
复用和分佣：发送端几个高层会话复用同一条底层的连接，在接收端再进行分用，（传输层，网络层，数据链路层）
连接建立和释放：交换数据前先建立一条逻辑连接，数据传送结束后释放连接，（传输层）

osi 参考模型 7 层

- 应用层
- 表示层
- 会话层
- 传输层
- 网络层
- 数据链路层
- 物理层

TCP/IP 模型是四层

tcp/ip

- 应用层
  - 应用层
  - 表示层
  - 会话层
- 运输层
- 网络层
- 网络接口层
  - 没有具体内容

五层协议的体系结构

- 应用层
  - 应用层
  - 表示层
  - 会话层
- 运输层
- 网络层
- 数据链路层
- 物理层

TCP/IP 协议分层
应用层： HTTP FTP SMTP DNS POP3 等
传输层： `TCP` UDP
网络层： ARP `IP` ICMP IGMP
数据链路层：CSMA/CD PPP X.25 HDLC 帧中继  
(网络接口层)
